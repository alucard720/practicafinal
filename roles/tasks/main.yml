---
- name: Extraer datos del tenista uno
  copy:
    dest: /vagrant/partido.txt
    content: |

      First Name: {{ first_name }}.
      Last Name: {{ last_name }}.
      City: {{ city }}.
      id: {{ id }}.
      Fecha: {{ lookup('pipe', 'date -u +"%Y-%m-%dT%H:%M:%SZ"') }}.

- name: Extraer campos de  JSON
  ansible.builtin.uri:
    url: "{{server}}{{endpoint}}"
    method: GET
    status_code: 200
    timeout: 30
  register: result_response

- name: Extraer datos del tenista dos
  copy:
    dest: /vagrant/segundo_tenista.txt
    content: |
      nombre: "{{ result_response.json | community.general.json_query('[0].first_name')  }}".
      apellido: "{{ result_response.json | community.general.json_query('[0].last_name')  }}".
      ciudad: "{{ result_response.json | community.general.json_query('[0].address.city')  }}".
      id: "{{ result_response.json | community.general.json_query('[0].id')  }}".
      current_date: "{{ ansible_date_time.date }}"
